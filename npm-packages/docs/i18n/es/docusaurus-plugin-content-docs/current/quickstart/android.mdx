---
title: Guía rápida de Android Kotlin
sidebar_label: Android Kotlin
description: "Añade Convex a un proyecto de Android Kotlin"
hide_table_of_contents: true
sidebar_position: 600
---

Aprende cómo consultar datos de Convex en un proyecto de Android Kotlin.

Esta guía rápida presupone que tienes Android Studio, node y npm instalados. Si no
tienes esas herramientas, tómate un tiempo para instalarlas primero.

<StepByStep>
  <Step title="Crea una nueva aplicación para Android en Android Studio">
    Selecciona las siguientes opciones en el asistente.

    ```
    1. Choose the "Empty Activity" template
    2. Name it "Convex Quickstart"
    3. Choose min SDK as 26
    4. Choose Kotlin as the Gradle DSL
    ```
  </Step>

  <Step title="Configura el archivo AndroidManifest">
    Añade lo siguiente a tu `AndroidManifest.xml`.

    ```xml
    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools">
        // highlight-next-line
        <uses-permission android:name="android.permission.INTERNET"/>
        <application>
            <!-- ... contenido existente de la aplicación -->
        </application>
    </manifest>
    ```
  </Step>

  <Step title="Configura las dependencias">
    Añade las siguientes entradas al archivo `:app` `build.gradle.kts` (ignora por ahora la sugerencia del IDE de moverlas al catálogo de versiones, si aparece).

    Asegúrate de sincronizar Gradle cuando hayas completado todo lo anterior (Android Studio debería pedirte que lo hagas).

    ```kotlin
    plugins {
        // ... existing plugins
        // highlight-next-line
        kotlin("plugin.serialization") version "1.9.0"
    }

    dependencies {
        // ... dependencias existentes
        // highlight-next-line
        implementation("dev.convex:android-convexmobile:0.4.1@aar") {
            // highlight-next-line
            isTransitive = true
        // highlight-next-line
        }
        // highlight-next-line
        implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.3")
    }
    ```
  </Step>

  <Step title="Instalar el backend de Convex">
    Abre una terminal en Android Studio e instala las bibliotecas de cliente y servidor de Convex.

    ```bash
    npm init -y
    npm install convex
    ```
  </Step>

  <Step title="Iniciar Convex">
    Inicia un despliegue dev de Convex. Sigue las instrucciones que aparecen en la línea de comandos.

    ```bash
    npx convex dev
    ```
  </Step>

  <Step title="Crea datos de ejemplo para tu base de datos">
    Crea un nuevo archivo `sampleData.jsonl` con el siguiente contenido.

    ```json
    {"text": "Buy groceries", "isCompleted": true}
    {"text": "Go for a swim", "isCompleted": true}
    {"text": "Integrate Convex", "isCompleted": false}
    ```
  </Step>

  <Step title="Añade los datos de ejemplo a tu base de datos">
    Abre otra pestaña de la terminal y ejecútalo.

    ```bash
    npx convex import --table tasks sampleData.jsonl
    ```
  </Step>

  <Step title="Exponer una consulta de base de datos">
    Crea un archivo `tasks.ts` en tu directorio `convex/` con el siguiente contenido.

    ```tsx
    import { query } from "./_generated/server";

    export const get = query({
      args: {},
      handler: async (ctx) => {
        return await ctx.db.query("tasks").collect();
      },
    });
    ```
  </Step>

  <Step title="Crea una clase de datos">
    Agrega una nueva `data class` a tu `MainActivity` para manejar los datos de la tarea
    definidos anteriormente. Importa todo lo que te pida.

    ```kotlin
    @Serializable
    data class Task(val text: String, val isCompleted: Boolean)
    ```
  </Step>

  <Step title="Crea la interfaz de usuario">
    Elimina las funciones `@Composable` de plantilla que creó Android Studio y
    agrega una nueva para mostrar datos de tu despliegue de Convex. De nuevo, importa
    todo lo que te pida.

    ```kotlin
    @Composable
    fun Tasks(client: ConvexClient, modifier: Modifier = Modifier) {
        var tasks: List<Task> by remember { mutableStateOf(listOf()) }
        LaunchedEffect(key1 = "launch") {
            client.subscribe<List<Task>>("tasks:get").collect { result ->
                result.onSuccess { remoteTasks ->
                    tasks = remoteTasks
                }
            }
        }
        LazyColumn(
            modifier = modifier
        ) {
            items(tasks) { task ->
                Text(text = "Text: ${task.text}, Completed?: ${task.isCompleted}")
            }
        }
    }
    ```
  </Step>

  <Step title="Conecta tu aplicación con el backend">
    1. Obtén la URL de implementación de tu servidor de desarrollo con
       `cat .env.local | grep CONVEX_URL`
    2. Actualiza el método `onCreate` en tu `MainActivity.kt` para que quede así:

    ```kotlin
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            ConvexQuickstartTheme {
                Scaffold(modifier = Modifier.fillMaxSize()) { innerPadding ->
                    // highlight-next-line
                    Tasks(
                        // highlight-next-line
                        client = ConvexClient($YOUR_CONVEX_URL),
                        // highlight-next-line
                        modifier = Modifier.padding(innerPadding)
                    // highlight-next-line
                    )
                }
            }
        }
    }
    ```
  </Step>

  <Step title="Corrige las importaciones que falten">
    Corrige las importaciones que falten (tus declaraciones de importación deberían verse
    algo como esto):

    ```kotlin
    import android.os.Bundle
    import androidx.activity.ComponentActivity
    import androidx.activity.compose.setContent
    import androidx.activity.enableEdgeToEdge
    import androidx.compose.foundation.layout.fillMaxSize
    import androidx.compose.foundation.layout.padding
    import androidx.compose.foundation.lazy.LazyColumn
    import androidx.compose.foundation.lazy.items
    import androidx.compose.material3.Scaffold
    import androidx.compose.material3.Text
    import androidx.compose.runtime.Composable
    import androidx.compose.runtime.LaunchedEffect
    import androidx.compose.runtime.getValue
    import androidx.compose.runtime.mutableStateOf
    import androidx.compose.runtime.remember
    import androidx.compose.runtime.setValue
    import androidx.compose.ui.Modifier
    import dev.convex.android.ConvexClient
    import kotlinx.serialization.Serializable
    ```
  </Step>

  <Step title="Ejecuta la aplicación">
    También puedes agregar, actualizar o eliminar documentos en tu tabla `tasks`
    en `dashboard.convex.dev`; la aplicación se actualizará con los cambios en
    tiempo real.

    ```
    Desde el menú del IDE, elige "Run" > "Run 'app'"
    ```
  </Step>
</StepByStep>

Consulta la [documentación completa de Kotlin para Android](/client/android.md).