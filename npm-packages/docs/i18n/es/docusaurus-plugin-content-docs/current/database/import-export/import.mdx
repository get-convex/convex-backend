---
title: "Importación de datos"
sidebar_label: "Importación de datos"
description: "Importa datos a Convex"
sidebar_position: 169
---

Puedes importar datos a Convex desde un archivo local mediante la línea de comandos.

```sh
npx convex import
```

<BetaAdmonition feature="Importación de datos" verb="is" />

Usa `--help` para ver todas las opciones. Aquí se describen los flujos más habituales.

## Importación de una única tabla \{#single-table-import\}

```sh
npx convex import --table <tableName> <path>
```

Importa un archivo CSV, JSON o JSONLines en una tabla de Convex.

* Los archivos `.csv` deben tener un encabezado y cada entrada de cada fila se interpreta
  como un número (de coma flotante) o una cadena.
* Los archivos `.jsonl` deben tener un objeto JSON por línea.
* Los archivos `.json` deben ser un array de objetos JSON.
  * Los arrays JSON tienen un límite de tamaño de 8MiB. Para importar más datos, usa CSV o
    JSONLines. Puedes convertir json a jsonl con un comando como
    `jq -c '.[]' data.json > data.jsonl`

Las importaciones en una tabla que ya contiene datos fallarán de manera predeterminada, pero puedes
especificar `--append` para agregar las filas importadas a la tabla o `--replace` para
reemplazar los datos existentes en la tabla con la importación.

De forma predeterminada se importa en tu despliegue dev. Usa `--prod` para importar en
tu despliegue de producción o `--preview-name` para importar en un despliegue
de vista previa.

## Restaurar datos a partir de un archivo ZIP de copia de seguridad \{#restore-data-from-a-backup-zip-file\}

```sh
npx convex import <path>.zip
```

Importa una [copia de seguridad](/database/backup-restore) en un despliegue de Convex, donde
la copia de seguridad es un archivo ZIP que descargaste desde el panel de control. Los documentos
conservarán sus campos `_id` y `_creationTime` de modo que se mantengan las referencias entre tablas.

Las importaciones en las que las tablas ya contienen datos fallarán de manera predeterminada, pero puedes
especificar `--replace` para sustituir los datos existentes en las tablas mencionadas en el archivo ZIP.

## Casos de uso \{#use-cases\}

1. Pre-cargar despliegues dev con datos de ejemplo.

```sh
# copia de seguridad completa - exportada desde prod u otro despliegue dev.
npx convex import seed_data.zip

# Import single table from jsonl/csv
npx convex import --table <table name> data.jsonl
```

2. Restaura un despliegue desde una [copia de seguridad](/database/backup-restore)
   mediante código. Descarga una copia de seguridad y restáurala si es necesario.

```sh
npx convex import --prod --replace backup.zip
```

3. Inicializa los despliegues de vista previa con datos de ejemplo, exportados desde prod, dev o
   otro despliegue de vista previa. Ejemplo para Vercel, inicializando datos desde
   `seed_data.zip` confirmado en la raíz del repositorio.

```sh
npx convex deploy --cmd 'npm run build' &&
if [ "$VERCEL_ENV" == "preview" ]; then
npx convex import --preview-name "$VERCEL_GIT_COMMIT_REF" seed_data.zip;
fi
```

4. Vacía una tabla de manera eficiente mediante una importación vacía.

```sh
touch empty_file.jsonl
npx convex import --replace --table <tableNameToClear> empty_file.jsonl
```

## Características \{#features\}

* La importación de datos es la única forma de crear documentos con campos `_id` y
  `_creationTime` preexistentes.
  * El campo `_id` debe ajustarse al formato de ID de Convex.
  * Si no se proporcionan `_id` o `_creationTime`, se eligen nuevos valores durante
    la importación.
* La importación de datos crea y reemplaza tablas de forma atómica (excepto cuando se usa
  `--append`).
  * Las consultas y mutaciones no verán estados intermedios en los que solo se haya importado
    parte de los datos.
  * Los índices y esquemas funcionarán sobre los nuevos datos sin necesitar tiempo para
    volver a rellenarse ni volver a validarse.
* La importación de datos solo afecta a las tablas que se mencionan en la importación, ya sea mediante
  `--table` o como entradas en el archivo ZIP.
* Aunque JSON y JSONLines pueden importar valores JSON arbitrarios, las importaciones de ZIP pueden
  importar además otros valores de Convex: Int64, Bytes, etc. Los tipos se
  preservan en el archivo ZIP mediante el archivo `generated_schema.jsonl`.
* La importación de datos de archivos ZIP que incluyen [file storage](/file-storage) importa los
  archivos y preserva los documentos [`_storage`](/database/advanced/system-tables.mdx),
  incluyendo sus campos `_id`, `_creationTime` y `contentType`.

## Advertencias \{#warnings\}

* [Streaming Export](/production/integrations/streaming-import-export.md)
  (Fivetran o Airbyte) no gestiona importaciones de datos ni restauraciones de
  copias de seguridad, de forma similar a la eliminación y creación de tablas y
  algunos cambios de esquema. Recomendamos restablecer la sincronización de la
  exportación en streaming después de una restauración o una importación de
  datos.
* Evita cambiar el archivo ZIP entre descargarlo desde Data Export e
  importarlo con `npx convex import`. Algunos cambios manuales del archivo ZIP
  podrían ser posibles, pero no están documentados. Comparte tu caso de
  uso y consúltalo con el equipo de Convex en
  [Discord](https://convex.dev/community).
* La importación de datos no siempre es posible al importar en un despliegue
  que se creó antes de la versión 1.7 de Convex.
  * La importación puede funcionar, especialmente cuando se importa una copia de
    seguridad ZIP desde un despliegue creado en un momento cercano al del
    despliegue de destino. Como caso especial, siempre puedes restaurar copias
    de seguridad de tu propio despliegue.
  * Ponte en contacto en [Discord](https://convex.dev/community) si encuentras
    problemas, ya que puede haber una solución alternativa.

La importación de datos usa el ancho de banda de la base de datos para escribir
todos los documentos y el ancho de banda de archivos si la exportación incluye
almacenamiento de archivos. Puedes observar este ancho de banda en el
[panel de control de uso](https://dashboard.convex.dev/team/settings/usage)
como la función `_cli/import` y el costo asociado en la
[documentación de límites](/production/state/limits#database).