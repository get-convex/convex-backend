---
title: Next.js クイックスタート
sidebar_label: Next.js
description: "Next.js プロジェクトに Convex を追加する"
hide_table_of_contents: true
sidebar_position: 200
---

import sampleData from "!!raw-loader!@site/../private-demos/quickstarts/nextjs/sampleData.jsonl";
import layout from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir/app/layout.tsx";
import ConvexClientProvider from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir/app/ConvexClientProvider.tsx";
import tasks from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir/convex/tasks.ts";
import page from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir/app/page.tsx";
import layoutJs from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir-js/app/layout.js";
import ConvexClientProviderJs from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir-js/app/ConvexClientProvider.jsx";
import tasksJs from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir-js/convex/tasks.js";
import pageJs from "!!raw-loader!@site/../private-demos/quickstarts/nextjs-app-dir-js/app/page.js";

<Admonition type="tip" title="Convex + Next.js">
  Convex は、Next.js とすばやく簡単に統合できるオールインワンのバックエンド兼データベースです。

  使い始めたら、次を参照してセットアップ方法を確認してください:
  [ホスティング](/production/hosting/hosting.mdx)、
  [サーバーサイドレンダリング](/client/nextjs/app-router/server-rendering.mdx)、および
  [認証](https://docs.convex.dev/client/nextjs/)。
</Admonition>

Convex と Next.js をすばやくセットアップするには、次のコマンドを実行します:

<p>
  <b>
    <CodeWithCopyButton text="npm create convex@latest" />
  </b>
</p>

または、以下のガイドに従ってください。

***

App Router を使った Next.js アプリで Convex からデータをクエリする方法を学びましょう。<LanguageSelector verbose />

代わりに、このクイックスタートの
[Pages Router](/client/nextjs/pages-router/quickstart-nextjs-pages-router.mdx)
版を参照することもできます。


<StepByStep>
  <Step title="Next.js アプリを作成する">
    `npx create-next-app` コマンドを使って Next.js アプリを作成します。

    各プロンプトではそのまま Enter キーを押し、デフォルトのオプションを選択します。

    <JSDialectVariants>
      ```sh
      npx create-next-app@latest my-app
      ```

      ```sh
      npx create-next-app@latest my-app --js
      ```
    </JSDialectVariants>

  </Step>
  <Step title="Convex のクライアントおよびサーバーライブラリをインストールする">
    まずは `convex` パッケージをインストールします。

    アプリのディレクトリに移動して `convex` をインストールします。


    ```sh
    cd my-app && npm install convex
    ```

  </Step>
  <Step title="Convex の dev デプロイメントをセットアップする">
    次に `npx convex dev` を実行します。これにより、
    GitHub へのログイン、プロジェクトの作成、
    本番用 URL とデプロイメントURLの保存が求められます。

    また、バックエンドの API 関数を書くための `convex/` フォルダも
    自動的に作成されます。`dev` コマンドはそのまま動作を続け、
    あなたの関数をクラウド上の dev デプロイメントと同期します。


    ```sh
    npx convex dev
    ```

  </Step>

  <Step title="データベース用のサンプルデータを作成する">
    新しいターミナルウィンドウで、いくつかのサンプルデータを含む
    `sampleData.jsonl` ファイルを作成します。

    <Snippet
      source={sampleData}
      title="sampleData.jsonl"
    />

  </Step>

  <Step title="サンプルデータをデータベースに追加する">
    [`import`](/database/import-export/import) コマンドを使って、サンプルデータを含む `tasks` テーブルを
    Convex データベースに追加します。

    ```
    npx convex import --table tasks sampleData.jsonl
    ```

  </Step>

  <Step title="データベースクエリを公開する">
    `convex/` フォルダ内に新しいファイル <JSDialectFileName name="tasks.ts" /> を追加し、
    データを読み込むクエリ関数を定義します。

    このファイルからクエリ関数をエクスポートすると、
    ファイル名とエクスポート名に基づいた `api.tasks.get`
    という名前の API 関数が宣言されます。

    <TSAndJSSnippet
      sourceTS={tasks}
      sourceJS={tasksJs}
      title="convex/tasks.ts"
    />

  </Step>

  <Step title="Convex プロバイダ用のクライアントコンポーネントを作成する">
    `<ConvexProvider>` をクライアント側で使用するには、`ConvexReactClient` を渡す必要があります。

    `app/` フォルダ内に新しいファイル <JSDialectFileName name="ConvexClientProvider.tsx" /> を追加し、次のコードを記述します。これにより、`<ConvexProvider>` をラップし、そこに `<ConvexReactClient>` を渡すクライアントコンポーネントが作成されます。

    <TSAndJSSnippet
      sourceTS={ConvexClientProvider}
      sourceJS={ConvexClientProviderJs}
      title="app/ConvexClientProvider.tsx"
    />

  </Step>

  <Step title="ConvexClientProvider を組み込む">
    <JSDialectFileName name="app/layout.tsx" ext="js" /> 内で、`body` 要素の子コンポーネントを
    `<ConvexClientProvider>` でラップします。

    <TSAndJSSnippet
      sourceTS={layout}
      sourceJS={layoutJs}
      title="app/layout.tsx"
      jsExtension="js"
      highlightPatterns={[ "Convex", ]}
    />

  </Step>

  <Step title="アプリでデータを表示する">
    <JSDialectFileName name="app/page.tsx" ext="js" /> 内で、`useQuery()` フックを使って
    `api.tasks.get` API 関数からデータを取得します。

    <TSAndJSSnippet
      sourceTS={page}
      sourceJS={pageJs}
      title="app/page.tsx"
      jsExtension="js"
      highlightPatterns={[ "use client", "useQuery", "api", "tasks", "text", "\\)\\)\\}" ]}
    />

  </Step>

  <Step title="アプリを起動する">
    Next.js の開発サーバーを起動し、ブラウザで [http://localhost:3000](http://localhost:3000) を開いて、
    タスク一覧を確認します。

    ```sh
    npm run dev
    ```

  </Step>

</StepByStep>

完全な [Next.js ドキュメント](/client/nextjs/app-router/index.mdx) も参照してください。